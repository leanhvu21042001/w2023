<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Week 5: Data persistance | MAD9124</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Full-stack: API Development">
    
    <link rel="preload" href="/w2023/assets/css/0.styles.494dd125.css" as="style"><link rel="preload" href="/w2023/assets/js/app.60650c02.js" as="script"><link rel="preload" href="/w2023/assets/js/3.4b0adc00.js" as="script"><link rel="preload" href="/w2023/assets/js/9.42e2f10f.js" as="script"><link rel="preload" href="/w2023/assets/js/15.c072e039.js" as="script"><link rel="preload" href="/w2023/assets/js/16.98a772dc.js" as="script"><link rel="prefetch" href="/w2023/assets/js/10.f600ef9c.js"><link rel="prefetch" href="/w2023/assets/js/11.59cce816.js"><link rel="prefetch" href="/w2023/assets/js/12.9a8f0e36.js"><link rel="prefetch" href="/w2023/assets/js/13.b4c9d204.js"><link rel="prefetch" href="/w2023/assets/js/14.1bbcf46f.js"><link rel="prefetch" href="/w2023/assets/js/17.2696ccfd.js"><link rel="prefetch" href="/w2023/assets/js/18.4c772c8d.js"><link rel="prefetch" href="/w2023/assets/js/19.0ed82ce5.js"><link rel="prefetch" href="/w2023/assets/js/2.5288beb2.js"><link rel="prefetch" href="/w2023/assets/js/20.770d7140.js"><link rel="prefetch" href="/w2023/assets/js/21.6ef972b3.js"><link rel="prefetch" href="/w2023/assets/js/22.ef81ef04.js"><link rel="prefetch" href="/w2023/assets/js/23.417c179f.js"><link rel="prefetch" href="/w2023/assets/js/24.bdbbc474.js"><link rel="prefetch" href="/w2023/assets/js/25.036dac97.js"><link rel="prefetch" href="/w2023/assets/js/26.cfed9991.js"><link rel="prefetch" href="/w2023/assets/js/27.f330a31c.js"><link rel="prefetch" href="/w2023/assets/js/28.49afbf1d.js"><link rel="prefetch" href="/w2023/assets/js/29.37e36a86.js"><link rel="prefetch" href="/w2023/assets/js/30.32dcbee6.js"><link rel="prefetch" href="/w2023/assets/js/31.0af45ea5.js"><link rel="prefetch" href="/w2023/assets/js/32.7ce3bc44.js"><link rel="prefetch" href="/w2023/assets/js/33.589d5da0.js"><link rel="prefetch" href="/w2023/assets/js/34.fd5d60cc.js"><link rel="prefetch" href="/w2023/assets/js/35.eb1cbce0.js"><link rel="prefetch" href="/w2023/assets/js/36.2c862154.js"><link rel="prefetch" href="/w2023/assets/js/37.5398f93e.js"><link rel="prefetch" href="/w2023/assets/js/38.cf75b57c.js"><link rel="prefetch" href="/w2023/assets/js/39.9092bb5a.js"><link rel="prefetch" href="/w2023/assets/js/4.a4d15534.js"><link rel="prefetch" href="/w2023/assets/js/5.9ee2e4c7.js"><link rel="prefetch" href="/w2023/assets/js/6.62eb8be9.js"><link rel="prefetch" href="/w2023/assets/js/7.109c5752.js"><link rel="prefetch" href="/w2023/assets/js/8.8ff7fd07.js">
    <link rel="stylesheet" href="/w2023/assets/css/0.styles.494dd125.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/w2023/" class="home-link router-link-active"><!----> <span class="site-name">MAD9124</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/w2023/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2023/modules/" class="nav-link router-link-active">
  Modules
</a></div><div class="nav-item"><a href="/w2023/deliverables/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/w2023/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/w2023/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2023/modules/" class="nav-link router-link-active">
  Modules
</a></div><div class="nav-item"><a href="/w2023/deliverables/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/w2023/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Content Modules</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/w2023/modules/" aria-current="page" class="sidebar-link">Table of contents</a></li><li><a href="/w2023/modules/week1/" class="sidebar-link">Week 1: Introduction &amp; Review</a></li><li><a href="/w2023/modules/week2/" class="sidebar-link">Week 2: Node Modules &amp; Express</a></li><li><a href="/w2023/modules/week3/" class="sidebar-link">Week 3: RESTful APIs</a></li><li><a href="/w2023/modules/week4/" class="sidebar-link">Week 4: Middleware functions</a></li><li><a href="/w2023/modules/week5/" aria-current="page" class="active sidebar-link">Week 5: Data persistance</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#agenda" class="sidebar-link">Agenda</a></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#file-system" class="sidebar-link">File system</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#synchronize-cars-json" class="sidebar-link">Synchronize cars.json</a></li></ul></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#databases" class="sidebar-link">Databases</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#relational-databases" class="sidebar-link">Relational Databases</a></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#document-databases" class="sidebar-link">Document Databases</a></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#relational-db-v-s-document-db" class="sidebar-link">Relational DB v.s. Document DB</a></li></ul></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#schema" class="sidebar-link">Schema</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#sql" class="sidebar-link">SQL</a></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#mongodb" class="sidebar-link">MongoDB</a></li></ul></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#hands-on-with-mongodb" class="sidebar-link">Hands on with MongoDB</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#install-mongodb" class="sidebar-link">Install MongoDB</a></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#install-mongodb-compass" class="sidebar-link">Install MongoDB Compass</a></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#running-mongodb-locally" class="sidebar-link">Running MongoDB locally</a></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#connect-to-mongodb-from-node-js" class="sidebar-link">Connect to MongoDB from Node.js</a></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#mongoose-quick-start" class="sidebar-link">Mongoose Quick Start</a></li></ul></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#ex5-setup-mongodb" class="sidebar-link">EX5 Setup MongoDB</a></li><li class="sidebar-sub-header"><a href="/w2023/modules/week5/#for-next-week" class="sidebar-link">For next week</a></li></ul></li><li><a href="/w2023/modules/week6/" class="sidebar-link">Week 6: Object Data Modeling</a></li><li><a href="/w2023/modules/week7/" class="sidebar-link">Week 7: Data security</a></li><li><a href="/w2023/modules/break-week/" class="sidebar-link">Break Week</a></li><li><a href="/w2023/modules/week8/" class="sidebar-link">Week 8: Access Control with JWT</a></li><li><a href="/w2023/modules/week9/" class="sidebar-link">Week 9: JWT Review</a></li><li><a href="/w2023/modules/week10/" class="sidebar-link">Week 10: Consistent Error Handling</a></li><li><a href="/w2023/modules/week11/" class="sidebar-link">Week 11: Production Preparation</a></li><li><a href="/w2023/modules/week12/" class="sidebar-link">Week 12: Testing</a></li><li><a href="/w2023/modules/week13/" class="sidebar-link">Week 13: Production Deployment</a></li><li><a href="/w2023/modules/week14/" class="sidebar-link">Week 14: Final Lab</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1><span class="week">Week 5</span><br> <span class="title">Data persistance and intro to MongoDB</span></h1> <div class="custom-block danger"><p class="custom-block-title">Assignment Due</p> <p>Assignment 1 - Basic CRUD - is due <strong>before</strong> 1:00 pm on Friday, February 7th.<br>
It is worth 10% of your final grade.</p></div> <div class="custom-block danger"><p class="custom-block-title">Quiz 4: Middleware <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>15 mins</span></p> <p>There will be a quiz today. It will be worth 2% of your final grade.</p></div> <h2 id="agenda"><a href="#agenda" class="header-anchor">#</a> Agenda</h2> <ul><li>KPI Survey (30 min)</li> <li>AMA (10 min)</li> <li>Quiz (10 min)</li> <li>Break (10 min)</li> <li>EX5-1 File system (15 min)</li> <li>Relational Databases v.s. Document Databases (20 min)</li> <li>EX5-2 Install MongoDB &amp; Compass (15 mins)</li> <li>Break (10 mins)</li> <li>EX5-3 Connect with Mongoose (30 mins)</li></ul> <h2 id="file-system"><a href="#file-system" class="header-anchor">#</a> File system</h2> <p>Data persistance is about saving the last know state of all data elements in our application. Ultimately, this means saving it to a file on disk somewhere. This could be a local JSON file. It could be a cloud storage service like Amazon's S3 or Google Cloud Storage. More often it is handled by an intermediate database service.</p> <h3 id="synchronize-cars-json"><a href="#synchronize-cars-json" class="header-anchor">#</a> Synchronize <code>cars.json</code></h3> <p>We are going to focus mostly on the database scenario for the rest of the course, but let's examine the local JSON file example for just a minute. If we examine our in-class project from last week, every time we restarted the application our Cars collection reset to the initial four objects loaded from our <code>cars.js</code> file. With just a few extra lines of code, we could ensure that the current state of our application data was saved every time one of the route handlers is called.</p> <h4 id="convert-cars-js-to-cars-json"><a href="#convert-cars-js-to-cars-json" class="header-anchor">#</a> Convert cars.js to cars.json</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;make&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Tesla&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;model&quot;</span><span class="token operator">:</span> <span class="token string">&quot;S&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Black&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;make&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Tesla&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;model&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Indigo&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;make&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Tesla&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;model&quot;</span><span class="token operator">:</span> <span class="token string">&quot;X&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Brown&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token property">&quot;make&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Tesla&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;model&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Y&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Silver&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="create-new-utility-function"><a href="#create-new-utility-function" class="header-anchor">#</a> Create new utility function</h4> <p>In our <code>carsRouter.js</code> module, we will need to import the <code>fs</code> core node module -- let's use the Promises version.</p> <p>Then create a new function called <code>writeJsonData</code> that takes a JavaScript data structure as an argument. The function will open our <code>/data/cars.json</code> in write mode, and then write out the <code>data</code> argument converted to JSON format.</p> <p>Wrap the logic in a <code>try/catch</code> block to handle any errors, and ensure the <code>filehandle</code> gets closed by using the <code>finally</code> clause.</p> <div class="language-js extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>promises

<span class="token keyword">const</span> <span class="token function-variable function">writeJsonData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> filehandle
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    filehandle <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">../data/cars.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> filehandle<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Problem writing cars.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>filehandle <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">await</span> filehandle<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="databases"><a href="#databases" class="header-anchor">#</a> Databases</h2> <p>Most real world applications need to store structured data that reflects the state of the application and is selectively searchable, with appropriate authorization credentials. This is the job of a database.</p> <p>Traditionally databases systems have been based on a series of tables, like a spreadsheet, with the columns representing the properties on a record and each row containing the complete set of properties for that unique record.</p> <h3 id="relational-databases"><a href="#relational-databases" class="header-anchor">#</a> Relational Databases</h3> <p>As we build applications that follow an Object Oriented Design, each table maps to a collection of objects of a given class. Often several of these objects will have some relationship to another. For example in a blog application, an Article will have an Author. Article and Author represent two classes of objects and there is a relationship between specific instances of those objects.</p> <p>We have typically solved the storage of this kind of data with <a href="https://www.dummies.com/programming/sql/knowing-just-enough-about-relational-databases/" target="_blank" rel="noopener noreferrer">Relational Databases<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> -- invented be a guy named <a href="https://searchoracle.techtarget.com/definition/E-F-Codd" target="_blank" rel="noopener noreferrer">Ted Codd<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> at IBM back in the early 1970s.</p> <p>The standard API for interacting with a relational database is the <a href="https://en.wikipedia.org/wiki/SQL" target="_blank" rel="noopener noreferrer">Structured Query Language<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (SQL). Some of the most common relational database systems are:</p> <ul><li>MySQL / MariaDB</li> <li>PostgreSQL</li> <li>Oracle DB</li></ul> <h3 id="document-databases"><a href="#document-databases" class="header-anchor">#</a> Document Databases</h3> <p>About 10 years ago, along with the development of Node.js people started wondering if there was a different kind of database model that was a better fit for the rapidly iterating development cycle of the JavaScript world. Many variations on the Document Database model also know as NoSQL Databases came into being. All of them centered on the JSON document as the storage model.</p> <p>The biggest attraction with NoSQL databases is the flexibility. There is no need to predefine a table schema as there is with SQL databases. Some examples of NoSQL databases are:</p> <ul><li>Google Firestore</li> <li>AWS Dynamo</li> <li>CouchDB</li> <li>MongoDB</li></ul> <h3 id="relational-db-v-s-document-db"><a href="#relational-db-v-s-document-db" class="header-anchor">#</a> Relational DB v.s. Document DB</h3> <h2 id="schema"><a href="#schema" class="header-anchor">#</a> Schema</h2> <p>A database schema, means to define the shape of the data that we want to store. With SQL databases, this must be defined in advance of storing data. With document databases, there is not database imposed schema. If you can put it in a JSON document, you can store it in the database.</p> <p>You will sometimes hear NoSQL databases referred to as schema-less. This does not mean that our application has no structured data model. It just shifts the responsibility for enforcing it to the application code rather than the database.</p> <p>Let's look at how we would represent the data for a simple attendance tracking application.</p> <h3 id="sql"><a href="#sql" class="header-anchor">#</a> SQL</h3> <p><img src="/w2023/assets/img/attendance-er-diagram.49c5cde0.png" alt="entity relationship diagram"></p> <h3 id="mongodb"><a href="#mongodb" class="header-anchor">#</a> MongoDB</h3> <p>Embedded data structures to model relationships. Although there is some benefit to this flexibility for rapid prototyping, there are trade-offs. The biggest one is synchronization of duplicate data. It takes just as much careful planning to build a robust and scalable NoSQL database.</p> <p><strong>Students</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">201800001</span><span class="token punctuation">,</span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Mickey'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Mouse'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nickName</span><span class="token operator">:</span> <span class="token string">'Steamboat Willie'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">'mickey.mouse@disney.com'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">githubId</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">birthDate</span><span class="token operator">:</span> <span class="token string">'1928-11-18'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageUrl</span><span class="token operator">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">201800002</span><span class="token punctuation">,</span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Minerva'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Mouse'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nickName</span><span class="token operator">:</span> <span class="token string">'Minnie'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">'minnie.mouse@disney.com'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">githubId</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">birthDate</span><span class="token operator">:</span> <span class="token string">'1928-11-18'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageUrl</span><span class="token operator">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>Courses</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">courses</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">'MAD9124'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Mobile API Development'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Students enhance their JavaScript skills to become productive with Full-stack development. They use a hands-on approach to build APIs using Node.JS and a variety of tools, frameworks, libraries and packages. The creation of these modern APIs also requires the students to develop skills with persistent scalable database storage systems. Project work culminates with students creating APIs to be used with websites and mobile applications. Students work individually as well as with other students to complete tasks.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">sections</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">'mad9124w19s300'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Alpha Team'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token literal-property property">classes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>
              <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">201800001</span><span class="token punctuation">,</span> <span class="token number">201800002</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">'mad9124w19s301'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">301</span><span class="token punctuation">,</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Bravo Team'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token literal-property property">classes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">34</span><span class="token punctuation">,</span> <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token string">'WT127'</span><span class="token punctuation">,</span> <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">students</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="hands-on-with-mongodb"><a href="#hands-on-with-mongodb" class="header-anchor">#</a> Hands on with MongoDB</h2> <h3 id="install-mongodb"><a href="#install-mongodb" class="header-anchor">#</a> Install MongoDB</h3> <p>There are several ways to get MongoDB running in your local development environment.</p> <ol><li>Download the runtime installer from the MongoDB website.</li> <li>Use Homebrew to install MongoDB.</li> <li>Use Docker and run it in a container.</li></ol> <p>For this course, we will use the Docker container option. This has the benefit of letting us use different versions for different project and keep the test/development data isolated between project. We will create a separate container with it's own data folder inside each project.</p> <div class="custom-block tip"><p class="custom-block-title">If you haven't already ...</p> <p>Create a free <a href="https://hub.docker.com" target="_blank" rel="noopener noreferrer">Docker Hub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> account.<br>
Download <strong>Docker Desktop</strong> and run the installer.</p></div> <h4 id="docker-compose"><a href="#docker-compose" class="header-anchor">#</a> Docker Compose</h4> <p>Because this will be running only in our development environment, we don't need to worry about complicated security and user authentication setup.</p> <p>In your project folder, create a new file called <code>docker-compose.yml</code> with the following content.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.1'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">mongo</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mongo<span class="token punctuation">:</span>bionic
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./data/mongo<span class="token punctuation">:</span>/data/db
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'27017-27019:27017-27019'</span>
</code></pre></div><p>Now using the terminal in your project folder, start your local MongoDB server with ...</p> <div class="language- extra-class"><pre class="language-text"><code>docker-compose up -d
</code></pre></div><p>Verify that the MongoDB container is running ...</p> <div class="language- extra-class"><pre class="language-text"><code>docker-compose ps
</code></pre></div><p>You should see something like ...</p> <div class="language- extra-class"><pre class="language-text"><code>    Name                  Command             State                                      Ports
----------------------------------------------------------------------------------------------------------------------------------
week5_mongo_1   docker-entrypoint.sh mongod   Up      0.0.0.0:27017-&gt;27017/tcp, 0.0.0.0:27018-&gt;27018/tcp, 0.0.0.0:27019-&gt;27019/tcp
</code></pre></div><p>To shut it down, simply run ...</p> <div class="language- extra-class"><pre class="language-text"><code>docker-compose down
</code></pre></div><h3 id="install-mongodb-compass"><a href="#install-mongodb-compass" class="header-anchor">#</a> Install MongoDB Compass</h3> <p>If you have worked with MySQL databases in the past you probably used a tool like phpMyAdmin, MySQL WorkBench or Sequel PRO to manage and query your databases. MongoDB has a similar tool call Compass. You can read all about its capabilities on at <a href="https://mongodb.com" target="_blank" rel="noopener noreferrer">MongoDB.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p><img src="/w2023/assets/img/screenshot-mongo-products.03a7f95d.png" alt="Select Compass from the products menu"></p> <p>Lets download and install it from the <a href="https://www.mongodb.com/download-center/compass" target="_blank" rel="noopener noreferrer">MongoDB Download Center<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Make sure that you select the latest stable <strong>'community edition'</strong>. That is the free one.</p> <p><img src="/w2023/assets/img/screenshot-compass-version.4acbd9a4.png" alt="select 1.20.4 (community edition stable) from the version menu"></p> <p>With the correct version selected, click the big green download button.</p> <p><img src="/w2023/assets/img/screenshot-compass-download.85a1c56d.png" alt="select 1.20.4 (community edition stable) from the version menu"></p> <h3 id="running-mongodb-locally"><a href="#running-mongodb-locally" class="header-anchor">#</a> Running MongoDB locally</h3> <p>To run MongoDB in our local development environment, we need to start the docker container. Open the terminal in your project folder and run this command ...</p> <div class="language- extra-class"><pre class="language-text"><code>docker-compose up -d
</code></pre></div><p>This starts the MongoDB server as a <a href="http://www.linfo.org/daemon.html" target="_blank" rel="noopener noreferrer">daemon process<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> running in the Docker container. It will be accessible to MongoDB Compass (and any other client application) on <strong>port 27017</strong> - that is the default port for MongoDB.</p> <p>Now open the MongoDB Compass app and connect using all the default settings.</p> <p><img src="/w2023/assets/img/screenshot-compass-connect.8a3ca582.png" alt="click the green connect button in the bottom right of the screen"></p> <h3 id="connect-to-mongodb-from-node-js"><a href="#connect-to-mongodb-from-node-js" class="header-anchor">#</a> Connect to MongoDB from Node.js</h3> <p>In our Node.js app, we need to open a connection to the MongoDB database so that we can store and retrieve our resource objects. MongoDB provides a <a href="https://www.npmjs.com/package/mongodb" target="_blank" rel="noopener noreferrer">official NPM package<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which we can use to interact with the database. To install it in your project, simply run <code>npm install mongodb</code> in the terminal.</p> <p><strong>However</strong>, for this course we will instead be using a popular data modeling library for MongoDB called <a href="https://mongoosejs.com" target="_blank" rel="noopener noreferrer">Mongoose<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <img alt="preview of the Mongoose website" src="/w2023/assets/img/screenshot-mongoose-website.7c3f3a07.png" class="screenshot"> <h3 id="mongoose-quick-start"><a href="#mongoose-quick-start" class="header-anchor">#</a> Mongoose Quick Start</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> mongoose
</code></pre></div><p>Create a new file in your project folder called <code>mongooseTest.js</code>. We will give the <code>mongoose.connect</code> method the connection string for our local MongoDB at <code>localhost:27017</code> and then append the name of the database we want to connect to at the end: <code>/test</code>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Even though we have not previously created this <code>/test</code> database, MongoDB will automatically create it the first time we try to interact with it.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://localhost:27017/test'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">useUnifiedTopology</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The mongoose.connect() method takes a configuration options object. Here we have used the <code>useNewUrlParser: true</code> option and the <code>useUnifiedTopology: true</code> option. These are required for connecting to MongoDB servers of version 4.0 or higher. Also, with this option, the <strong>port number MUST be included</strong> in the connection string.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Cat <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Spot'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
kitty<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">savedKitty</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>savedKitty<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> says 'meow'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>The <code>mongoose.model</code> method is a class constructor that creates a resource class that we can use to interact with the database. In the example above we are giving it two properties: 'Cat' is the name of the class of objects to store in a collection in the database, and <code>{name: String}</code> is the expected shape of each 'Cat' document.</p> <p><strong>An instance of a Model is a Document.</strong></p> <div class="custom-block tip"><p class="custom-block-title">Naming conventions</p> <p>Models are named as a singular noun and start with a capital letter. Database tables or document collections are named as the plural of the model name and are all lowercase.</p></div> <p>OK. Lets run it and then check the results in MongoDB Compass.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">node</span> mongooseTest.js
</code></pre></div><p>Let's try adding another Cat instance to the collection. Change the name on line three and rerun it.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> Cat <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Patches'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
kitty<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">savedKitty</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>savedKitty<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> says 'meow'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Let's try adding an age to our next Cat.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> Cat <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Callie'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
kitty<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">savedKitty</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>savedKitty<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> says 'meow'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>This time, when we check it in Compass the age was not saved. Our Mongoose Model automatically discards any properties that are not predefined. This time change the model schema as well.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> Cat <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> Number<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Callie'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
kitty<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">savedKitty</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>savedKitty<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> says 'meow'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>We can also insert many objects into the database at once.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Cat <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> Number<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> newCats <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Fluffy'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Pink Spots'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Tabatha'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>
Cat<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span>newCats<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">docs</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>docs<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>We have added many documents to our collection. How do we retrieve them? Add a new line to find all of the <code>cats</code> from the database.</p> <div class="language-js extra-class"><pre class="language-js"><code>Cat<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">listAll</span><span class="token operator">:</span> result<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>How about listing just the Cats with the name 'Spot'?</p> <div class="language-js extra-class"><pre class="language-js"><code>Cat<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Spot'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">spot</span><span class="token operator">:</span> result<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>That found all of the cats with the exact name 'Spot'. But, what if we wanted to check for names <em>like</em> Spot? We can use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener noreferrer">regular expressions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to match patterns. Replace the quotes with slashes. Now it will match 'Spot', 'Spots', 'Spotty', or 'Pink Spots'.</p> <div class="language-js extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br></div><pre class="language-js"><code>Cat<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Spot</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">regex</span><span class="token operator">:</span> result<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Regular expressions can be a very powerful tool. Checkout the <a href="#for-next-week">resources linked below</a> to learn more.</p> <p>Putting it all together, the final version of our <code>mongooseTest.js</code> should look like this.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span>

<span class="token comment">// Import the Mongoose library</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span>

<span class="token comment">// Connect the mongoose instance to our MongoDB</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://localhost:27017/test'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">useUnifiedTopology</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Define the document model for the 'cats' collection</span>
<span class="token keyword">const</span> Cat <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> Number<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Create a new Cat document and save it to the database</span>
<span class="token keyword">const</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Callie'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
kitty<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">savedKitty</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>savedKitty<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> says 'meow'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// Directly insert an array of Cat property objects</span>
<span class="token keyword">const</span> newCats <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Fluffy'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Pink Spots'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Tabatha'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>
Cat<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span>newCats<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">docs</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>docs<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// List all of the Cats in the collection</span>
Cat<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">listAll</span><span class="token operator">:</span> result<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// List only the Cats with 'Spot' in the name</span>
Cat<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Spot</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">regex</span><span class="token operator">:</span> result<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>There is a lot more to learn about how to use Mongoose and we will continue next week. In particular we will look at how to integrate Mongoose with our <code>carsRouter.js</code> from last week. In preparation, please review the reading material below.</p> <h2 id="ex5-setup-mongodb"><a href="#ex5-setup-mongodb" class="header-anchor">#</a> EX5 Setup MongoDB</h2> <p>Submit a screenshot of MongoDB Compass showing the connection to localhost:27017/test.cats and the listing of the documents in the collection after our test transactions.</p> <p><img src="/w2023/assets/img/screenshot-compass.737178b0.png" alt="example compass screenshot"></p> <h2 id="for-next-week"><a href="#for-next-week" class="header-anchor">#</a> For next week</h2> <p>Before next week's class, please read these additional online resources.</p> <ul><li><a href="https://mongoosejs.com/docs/models.html" target="_blank" rel="noopener noreferrer">Mongoose Docs: Models<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mongoosejs.com/docs/documents.html" target="_blank" rel="noopener noreferrer">Mongoose Docs: Documents<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mongoosejs.com/docs/queries.html" target="_blank" rel="noopener noreferrer">Mongoose Docs: Queries<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.lynda.com/JavaScript-tutorials/Regular-expressions/782146/5029404-4.html" target="_blank" rel="noopener noreferrer">Regular Expressions (regex)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>video</span></li> <li><a href="https://medium.com/factory-mind/regex-tutorial-a-simple-cheatsheet-by-examples-649dc1c3f285" target="_blank" rel="noopener noreferrer">Regex tutorial — A quick cheat sheet by examples<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.youtube.com/watch?v=zPeEU9dP83M" target="_blank" rel="noopener noreferrer">Intro to Regex<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>video</span></li> <li><a href="https://www.youtube.com/watch?v=kUMA1d1Sqto" target="_blank" rel="noopener noreferrer">RegEx in JS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>video</span></li></ul> <div class="custom-block warning"><p class="custom-block-title">Quiz</p> <p>There will be a short quiz next class. The questions could come from any of the material referenced above.</p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/5/2020, 5:05:07 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/w2023/modules/week4/" class="prev">
        Week 4: Middleware functions
      </a></span> <span class="next"><a href="/w2023/modules/week6/">
        Week 6: Object Data Modeling
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/w2023/assets/js/app.60650c02.js" defer></script><script src="/w2023/assets/js/3.4b0adc00.js" defer></script><script src="/w2023/assets/js/9.42e2f10f.js" defer></script><script src="/w2023/assets/js/15.c072e039.js" defer></script><script src="/w2023/assets/js/16.98a772dc.js" defer></script>
  </body>
</html>
